<!DOCTYPE html>
<html>
<head>
  <title>Indiainlast Color Game</title>
</head>
<body>
  <h1>Welcome to Indiainlast Color Game!</h1>
  <p>This is a test web version. Real game works in Python.</p>

  <!-- Points Display -->
  <div id="pointsDisplay" style="font-weight: bold; font-size: 18px; margin-bottom: 10px;">
    Points: <span id="points">100</span>
  </div>

  <!-- Player Panel -->
  <h2>Player Panel</h2>
  <label for="playerColor">Choose Color:</label>
  <select id="playerColor">
    <option value="red">Red</option>
    <option value="green">Green</option>
    <option value="violet">Violet</option>
  </select>
  <br><br>
  <label for="betAmount">Enter Bet Amount:</label>
  <input type="number" id="betAmount" value="10" min="1">
  <br><br>
  <button onclick="playGame()">Play</button>
  <p id="playerResult"></p>

  <!-- Admin Panel -->
  <h2>Admin Panel</h2>
  <label for="adminColor">Set Result Color:</label>
  <select id="adminColor">
    <option value="red">Red</option>
    <option value="green">Green</option>
    <option value="violet">Violet</option>
  </select>
  <button onclick="setResult()">Set Result</button>
  <p id="adminStatus"></p>

  <!-- Reset Button -->
  <button onclick="resetGame()">Reset Game</button>

  <!-- History Panel -->
  <h2>Game History</h2>
  <ul id="historyList"></ul>

  <!-- Script Section -->
  <script>
    let points = 100;
    let currentResult = "red";
    let history = [];

    function updatePointsDisplay() {
      document.getElementById("points").innerText = points;
    }

    function setResult() {
      const color = document.getElementById("adminColor").value;
      currentResult = color;
      document.getElementById("adminStatus").innerText = "Result set to: " + color;
    }

    function playGame() {
      const playerColor = document.getElementById("playerColor").value;
      const bet = parseInt(document.getElementById("betAmount").value);

      if (isNaN(bet) || bet <= 0 || bet > points) {
        document.getElementById("playerResult").innerText = "Invalid bet amount!";
        return;
      }

      let outcome = "";
      if (playerColor === currentResult) {
        points += bet;
        outcome = "WON";
        document.getElementById("playerResult").innerText = "You WON! +" + bet + " points.";
      } else {
        points -= bet;
        outcome = "LOST";
        document.getElementById("playerResult").innerText = "You LOST! -" + bet + " points.";
      }

      // Add to history
      history.unshift({
        color: playerColor,
        bet: bet,
        result: currentResult,
        outcome: outcome,
        remaining: points
      });
      if (history.length > 10) history.pop(); // limit to 10 entries

      updatePointsDisplay();
      updateHistory();
    }

    function updateHistory() {
      const historyList = document.getElementById("historyList");
      historyList.innerHTML = "";
      history.forEach(entry => {
        const li = document.createElement("li");
        li.innerText = `Chose ${entry.color}, Bet: ${entry.bet}, Result: ${entry.result}, ${entry.outcome}, Points Left: ${entry.remaining}`;
        historyList.appendChild(li);
      });
    }

    function resetGame() {
      points = 100;
      currentResult = "red";
      history = [];
      document.getElementById("playerResult").innerText = "";
      document.getElementById("adminStatus").innerText = "Game reset.";
      updatePointsDisplay();
      updateHistory();
    }

    updatePointsDisplay();
    updateHistory();
  </script>
</body>
</html>
